<form [formGroup]="newShowForm" novalidate fxLayout="column">
  <h2>New show</h2>
  <md-input-container>
    <input md-input placeholder="Name" formControlName="name">
  </md-input-container>

  <h4>Category</h4>
  <md-radio-group formControlName="category" fxLayout="column">
    <md-radio-button *ngFor="let c of categories" [value]="c._id">
      {{c.label}}
    </md-radio-button>
  </md-radio-group>

  <md-input-container>
    <input md-input type="date" placeholder="Premiere date" formControlName="premiereDate" appValueToDate>
  </md-input-container>

  <div formGroupName="recurring" *ngIf="isRecurring(newShowForm.get('category').value)" fxLayout="column">
    <md-input-container>
      <input md-input
        type="number"
        placeholder="Season #"
        size="2"
        min="1" max="99"
        formControlName="season">
    </md-input-container>

    <md-input-container>
      <input md-input
        type="number"
        placeholder="# of episodes"
        size="3"
        min="1" max="999"
        formControlName="episodes">
    </md-input-container>

    <h4>Frequency</h4>
    <md-radio-group formControlName="frequency" fxLayout="column">
      <md-radio-button *ngFor="let f of frequencies" [value]="f._id">
        {{f.label}}
      </md-radio-button>
    </md-radio-group>

    <wl-episodes-preview
      [disabled]="!(newShowForm.get('recurring').valid && newShowForm.get('premiereDate').valid)"
      [premiereDate]="newShowForm.get('premiereDate').value"
      [frequency]="newShowForm.get('recurring.frequency').value"
      [season]="newShowForm.get('recurring.season').value"
      [episodes]="newShowForm.get('recurring.episodes').value">
    </wl-episodes-preview>

  </div>

  <button md-icon-button [disabled]="!newShowForm.valid" (click)="save()"><md-icon>save</md-icon></button>

</form>
